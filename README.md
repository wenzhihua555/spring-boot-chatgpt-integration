# Spring Boot ChatGPT Integration Project

This project demonstrates how to integrate OpenAI's ChatGPT API with a Spring Boot application.

## Features

-   Configure OpenAI API Key via `application.properties` or environment variable.
-   RESTful API endpoint to interact with ChatGPT.
-   Customizable model, temperature, and max tokens per request.
-   Default values for model, temperature, and max tokens configurable in `application.properties`.
-   Configurable API timeout.
-   Basic unit and integration tests.
-   Global exception handling.

## API Endpoint

**POST** `/api/chat`

### Request Body (JSON)

```json
{
  "prompt": "Tell me a joke about programmers.",
  "model": "text-davinci-003", // Optional, defaults to value in application.properties
  "temperature": 0.5,          // Optional, defaults to value in application.properties
  "maxTokens": 100             // Optional, defaults to value in application.properties
}
```

-   `prompt` (String, required): The input text/question for ChatGPT.
-   `model` (String, optional): The OpenAI model to use (e.g., `text-davinci-003`, `gpt-3.5-turbo`).
-   `temperature` (Double, optional): Controls randomness. Lower values make the output more deterministic.
-   `maxTokens` (Integer, optional): The maximum number of tokens to generate in the completion.

### Response Body (JSON)

```json
{
  "reply": "Why was the JavaScript developer sad? Because he didn't Node how to Express himself!"
}
```

-   `reply` (String): The response generated by ChatGPT.

## Configuration

Update `src/main/resources/application.properties` or set environment variables:

-   `openai.api-key`: Your OpenAI API key (Required).
-   `openai.default-model`: Default model to use if not specified in the request (Default: `text-davinci-003`).
-   `openai.default-temperature`: Default temperature if not specified (Default: `0.7`).
-   `openai.max-tokens`: Default max tokens if not specified (Default: `150`).
-   `openai.api-timeout`: Timeout for OpenAI API calls (Default: `30s`).

## How to Run

1.  **Prerequisites**:
    *   Java 17 or later
    *   Maven
    *   An OpenAI API Key

2.  **Set OpenAI API Key**:
    Set the `OPENAI_API_KEY` environment variable:
    ```bash
    export OPENAI_API_KEY="your_openai_api_key_here"
    ```
    Alternatively, you can set `openai.api-key` directly in `application.properties` (not recommended for production).

3.  **Build and Run**:
    ```bash
    mvn spring-boot:run
    ```
    The application will start on `http://localhost:8080` by default.

4.  **Test the API**:
    You can use tools like `curl` or Postman to send requests to the `/api/chat` endpoint.

    Example using `curl`:
    ```bash
    curl -X POST http://localhost:8080/api/chat \
    -H "Content-Type: application/json" \
    -d '{
      "prompt": "What is Spring Boot?",
      "model": "text-davinci-003"
    }'
    ```

## Running Tests

To run the unit and integration tests:

```bash
mvn test
```
